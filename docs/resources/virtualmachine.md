---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "harvester_virtualmachine Resource - terraform-provider-harvester"
subcategory: ""
description: |-
  
---

# harvester_virtualmachine (Resource)



## Example Usage

```terraform
resource "harvester_virtualmachine" "k3os" {
  count     = 3
  name      = "k3os-${count.index}"
  namespace = "default"

  description = "test k3os iso image"
  tags = {
    ssh-user = "rancher"
  }

  cpu    = 4
  memory = "4Gi"

  efi         = true
  secure_boot = false

  network_interface {
    name         = "nic-1"
    network_name = harvester_network.mgmt-vlan1.id
  }

  disk {
    name       = "cdrom-disk"
    type       = "cd-rom"
    size       = "10Gi"
    bus        = "sata"
    boot_order = 2

    image       = harvester_image.k3os.id
    auto_delete = true
  }

  disk {
    name       = "rootdisk"
    type       = "disk"
    size       = "10Gi"
    bus        = "virtio"
    boot_order = 1
  }

  input {
    name = "tablet"
    type = "tablet"
    bus  = "usb"
  }
}


resource "harvester_virtualmachine" "ubuntu20" {
  name                 = "ubuntu20"
  namespace            = "default"
  restart_after_update = true

  description = "test ubuntu20 raw image"
  tags = {
    ssh-user = "ubuntu"
  }

  cpu    = 2
  memory = "2Gi"

  efi         = true
  secure_boot = true

  run_strategy    = "RerunOnFailure"
  hostname        = "ubuntu20"
  reserved_memory = "100Mi"
  machine_type    = "q35"

  network_interface {
    name           = "nic-1"
    wait_for_lease = true
  }

  disk {
    name       = "rootdisk"
    type       = "disk"
    size       = "10Gi"
    bus        = "virtio"
    boot_order = 1

    image       = harvester_image.ubuntu20.id
    auto_delete = true
  }

  disk {
    name        = "emptydisk"
    type        = "disk"
    size        = "20Gi"
    bus         = "virtio"
    auto_delete = true
  }

  cloudinit {
    user_data_secret_name    = harvester_cloudinit_secret.cloud-config-ubuntu20.name
    network_data_secret_name = harvester_cloudinit_secret.cloud-config-ubuntu20.name
  }
}

resource "harvester_virtualmachine" "opensuse154" {
  name                 = "opensuse154"
  namespace            = "default"
  restart_after_update = true

  description = "test raw image"
  tags = {
    ssh-user = "opensuse"
  }

  cpu    = 2
  memory = "2Gi"

  efi         = true
  secure_boot = true

  run_strategy = "RerunOnFailure"
  hostname     = "opensuse154"
  machine_type = "q35"

  ssh_keys = [
    harvester_ssh_key.mysshkey.id
  ]

  network_interface {
    name           = "nic-1"
    network_name   = harvester_network.cluster-vlan1.id
    wait_for_lease = true
  }

  network_interface {
    name         = "nic-2"
    model        = "virtio"
    type         = "bridge"
    network_name = harvester_network.cluster-vlan["2"].id
  }

  network_interface {
    name         = "nic-3"
    model        = "e1000"
    type         = "bridge"
    network_name = harvester_network.cluster-vlan["3"].id
  }

  disk {
    name       = "rootdisk"
    type       = "disk"
    size       = "10Gi"
    bus        = "virtio"
    boot_order = 1

    image       = harvester_image.opensuse154.id
    auto_delete = true
  }

  disk {
    name = "mount-disk"
    type = "disk"
    bus  = "scsi"

    existing_volume_name = harvester_volume.mount-disk.name
    auto_delete          = false
    hot_plug             = true
  }

  cloudinit {
    user_data_secret_name    = harvester_cloudinit_secret.cloud-config-opensuse154.name
    network_data_secret_name = harvester_cloudinit_secret.cloud-config-opensuse154.name
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `disk` (Block List, Min: 1) (see [below for nested schema](#nestedblock--disk))
- `name` (String) A unique name
- `network_interface` (Block List, Min: 1) (see [below for nested schema](#nestedblock--network_interface))

### Optional

- `cloudinit` (Block List, Max: 1) (see [below for nested schema](#nestedblock--cloudinit))
- `cpu` (Number)
- `cpu_model` (String) CPU model for the virtual machine
- `cpu_pinning` (Boolean) To enable VM CPU pinning, ensure that at least one node has the CPU manager enabled
- `create_initial_snapshot` (Boolean) Create an initial snapshot named {vm-name}-initial after the VM is created and ready
- `description` (String) Any text you want that better describes this resource
- `efi` (Boolean)
- `hostname` (String)
- `input` (Block List) (see [below for nested schema](#nestedblock--input))
- `isolate_emulator_thread` (Boolean) To enable isolate emulator thread, ensure that at least one node has the CPU manager enabled, also VM CPU pinning must be enabled. Note that enable option will allocate an additional dedicated CPU.
- `labels` (Map of String)
- `machine_type` (String)
- `memory` (String)
- `namespace` (String)
- `node_affinity` (Block List, Max: 1) Node affinity rules for scheduling VMs based on node labels (see [below for nested schema](#nestedblock--node_affinity))
- `node_selector` (Map of String) Node selector for scheduling the VM. The key is the label key and the value is the label value.
- `pod_affinity` (Block List, Max: 1) Pod affinity rules to co-locate VMs with matching pods (see [below for nested schema](#nestedblock--pod_affinity))
- `pod_anti_affinity` (Block List, Max: 1) Pod anti-affinity rules to separate VMs from matching pods (see [below for nested schema](#nestedblock--pod_anti_affinity))
- `reserved_memory` (String)
- `restart_after_update` (Boolean) restart vm after the vm is updated
- `run_strategy` (String) more info: https://kubevirt.io/user-guide/virtual_machines/run_strategies/
- `secure_boot` (Boolean) EFI must be enabled to use this feature
- `ssh_keys` (List of String) The `ssh_keys` are added to `cloudinit.user_data` if:
1. Both `cloudinit.user_data_base64` and `cloudinit.user_data_secret_name` are empty.
2. There is no `ssh_authorized_keys` field in `cloudinit.user_data`.
- `start` (Boolean, Deprecated)
- `tags` (Map of String) The tag is reflected as label on the VM.
For example: `sample-tag = sample` adds label `tag.harvesterhci.io/sample-tag: sample`.
For `ssh-user` tag, the value is added to `cloudinit.user_data` if:
1. Both `cloudinit.user_data_base64` and `cloudinit.user_data_secret_name` are empty.
2. There is no `user` field in `cloudinit.user_data`.
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))
- `tpm` (Block List, Max: 1) (see [below for nested schema](#nestedblock--tpm))

### Read-Only

- `id` (String) The ID of this resource.
- `message` (String)
- `node_name` (String)
- `state` (String)

<a id="nestedblock--disk"></a>
### Nested Schema for `disk`

Required:

- `name` (String)

Optional:

- `access_mode` (String)
- `auto_delete` (Boolean)
- `boot_order` (Number)
- `bus` (String)
- `container_image_name` (String)
- `existing_volume_name` (String)
- `hot_plug` (Boolean)
- `image` (String)
- `size` (String)
- `storage_class_name` (String)
- `type` (String)
- `volume_mode` (String)
- `volume_name` (String)


<a id="nestedblock--network_interface"></a>
### Nested Schema for `network_interface`

Required:

- `name` (String)

Optional:

- `boot_order` (Number) Boot order priority of this network interface
- `mac_address` (String)
- `model` (String)
- `network_name` (String) if the value is empty, management network is used
- `type` (String)
- `wait_for_lease` (Boolean) wait for this network interface to obtain an IP address. If a non-management network is used, this feature requires qemu-guest-agent installed and started in the VM, otherwise, VM creation will stuck until timeout

Read-Only:

- `interface_name` (String)
- `ip_address` (String)


<a id="nestedblock--cloudinit"></a>
### Nested Schema for `cloudinit`

Optional:

- `network_data` (String)
- `network_data_base64` (String)
- `network_data_secret_name` (String)
- `type` (String)
- `user_data` (String)
- `user_data_base64` (String)
- `user_data_secret_name` (String)


<a id="nestedblock--input"></a>
### Nested Schema for `input`

Required:

- `name` (String)

Optional:

- `bus` (String)
- `type` (String)


<a id="nestedblock--node_affinity"></a>
### Nested Schema for `node_affinity`

Optional:

- `preferred` (Block List) The scheduler will prefer to schedule pods to nodes that satisfy the affinity expressions specified by this field (see [below for nested schema](#nestedblock--node_affinity--preferred))
- `required` (Block List, Max: 1) If the affinity requirements specified by this field are not met at scheduling time, the pod will not be scheduled onto the node (see [below for nested schema](#nestedblock--node_affinity--required))

<a id="nestedblock--node_affinity--preferred"></a>
### Nested Schema for `node_affinity.preferred`

Required:

- `preference` (Block List, Min: 1, Max: 1) A node selector term, associated with the corresponding weight (see [below for nested schema](#nestedblock--node_affinity--preferred--preference))
- `weight` (Number) Weight associated with matching the corresponding nodeSelectorTerm, in the range 1-100

<a id="nestedblock--node_affinity--preferred--preference"></a>
### Nested Schema for `node_affinity.preferred.preference`

Optional:

- `match_expressions` (Block List) A list of node selector requirements by node's labels (see [below for nested schema](#nestedblock--node_affinity--preferred--preference--match_expressions))
- `match_fields` (Block List) A list of node selector requirements by node's fields (see [below for nested schema](#nestedblock--node_affinity--preferred--preference--match_fields))

<a id="nestedblock--node_affinity--preferred--preference--match_expressions"></a>
### Nested Schema for `node_affinity.preferred.preference.match_expressions`

Required:

- `key` (String) The label key that the selector applies to
- `operator` (String) Operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists, DoesNotExist, Gt, and Lt

Optional:

- `values` (List of String) Values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty


<a id="nestedblock--node_affinity--preferred--preference--match_fields"></a>
### Nested Schema for `node_affinity.preferred.preference.match_fields`

Required:

- `key` (String) The label key that the selector applies to
- `operator` (String) Operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists, DoesNotExist, Gt, and Lt

Optional:

- `values` (List of String) Values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty




<a id="nestedblock--node_affinity--required"></a>
### Nested Schema for `node_affinity.required`

Required:

- `node_selector_term` (Block List, Min: 1) Required. A list of node selector terms. The terms are ORed (see [below for nested schema](#nestedblock--node_affinity--required--node_selector_term))

<a id="nestedblock--node_affinity--required--node_selector_term"></a>
### Nested Schema for `node_affinity.required.node_selector_term`

Optional:

- `match_expressions` (Block List) A list of node selector requirements by node's labels (see [below for nested schema](#nestedblock--node_affinity--required--node_selector_term--match_expressions))
- `match_fields` (Block List) A list of node selector requirements by node's fields (see [below for nested schema](#nestedblock--node_affinity--required--node_selector_term--match_fields))

<a id="nestedblock--node_affinity--required--node_selector_term--match_expressions"></a>
### Nested Schema for `node_affinity.required.node_selector_term.match_expressions`

Required:

- `key` (String) The label key that the selector applies to
- `operator` (String) Operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists, DoesNotExist, Gt, and Lt

Optional:

- `values` (List of String) Values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty


<a id="nestedblock--node_affinity--required--node_selector_term--match_fields"></a>
### Nested Schema for `node_affinity.required.node_selector_term.match_fields`

Required:

- `key` (String) The label key that the selector applies to
- `operator` (String) Operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists, DoesNotExist, Gt, and Lt

Optional:

- `values` (List of String) Values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty





<a id="nestedblock--pod_affinity"></a>
### Nested Schema for `pod_affinity`

Optional:

- `preferred` (Block List) The scheduler will prefer to schedule pods to nodes that satisfy the affinity expressions specified by this field (see [below for nested schema](#nestedblock--pod_affinity--preferred))
- `required` (Block List) If the affinity requirements specified by this field are not met at scheduling time, the pod will not be scheduled onto the node (see [below for nested schema](#nestedblock--pod_affinity--required))

<a id="nestedblock--pod_affinity--preferred"></a>
### Nested Schema for `pod_affinity.preferred`

Required:

- `pod_affinity_term` (Block List, Min: 1, Max: 1) Required. A pod affinity term, associated with the corresponding weight (see [below for nested schema](#nestedblock--pod_affinity--preferred--pod_affinity_term))
- `weight` (Number) Weight associated with matching the corresponding podAffinityTerm, in the range 1-100

<a id="nestedblock--pod_affinity--preferred--pod_affinity_term"></a>
### Nested Schema for `pod_affinity.preferred.pod_affinity_term`

Required:

- `topology_key` (String) TopologyKey is the key of node labels. Nodes that have a label with this key and identical values are considered to be in the same topology

Optional:

- `label_selector` (Block List, Max: 1) A label query over a set of resources, in this case pods (see [below for nested schema](#nestedblock--pod_affinity--preferred--pod_affinity_term--label_selector))
- `namespace_selector` (Block List, Max: 1) A label query over the set of namespaces that the term applies to. The term is applied to the union of the namespaces selected by this field and the ones listed in the namespaces field (see [below for nested schema](#nestedblock--pod_affinity--preferred--pod_affinity_term--namespace_selector))
- `namespaces` (List of String) Namespaces specifies a static list of namespace names that the term applies to. The term is applied to the union of the namespaces listed in this field and the ones selected by namespaceSelector

<a id="nestedblock--pod_affinity--preferred--pod_affinity_term--label_selector"></a>
### Nested Schema for `pod_affinity.preferred.pod_affinity_term.label_selector`

Optional:

- `match_expressions` (Block List) A list of label selector requirements. The requirements are ANDed (see [below for nested schema](#nestedblock--pod_affinity--preferred--pod_affinity_term--label_selector--match_expressions))
- `match_labels` (Map of String) A map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value"

<a id="nestedblock--pod_affinity--preferred--pod_affinity_term--label_selector--match_expressions"></a>
### Nested Schema for `pod_affinity.preferred.pod_affinity_term.label_selector.match_expressions`

Required:

- `key` (String) The label key that the selector applies to
- `operator` (String) Operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist

Optional:

- `values` (List of String) Values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty



<a id="nestedblock--pod_affinity--preferred--pod_affinity_term--namespace_selector"></a>
### Nested Schema for `pod_affinity.preferred.pod_affinity_term.namespace_selector`

Optional:

- `match_expressions` (Block List) A list of label selector requirements. The requirements are ANDed (see [below for nested schema](#nestedblock--pod_affinity--preferred--pod_affinity_term--namespace_selector--match_expressions))
- `match_labels` (Map of String) A map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value"

<a id="nestedblock--pod_affinity--preferred--pod_affinity_term--namespace_selector--match_expressions"></a>
### Nested Schema for `pod_affinity.preferred.pod_affinity_term.namespace_selector.match_expressions`

Required:

- `key` (String) The label key that the selector applies to
- `operator` (String) Operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist

Optional:

- `values` (List of String) Values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty





<a id="nestedblock--pod_affinity--required"></a>
### Nested Schema for `pod_affinity.required`

Required:

- `topology_key` (String) TopologyKey is the key of node labels. Nodes that have a label with this key and identical values are considered to be in the same topology

Optional:

- `label_selector` (Block List, Max: 1) A label query over a set of resources, in this case pods (see [below for nested schema](#nestedblock--pod_affinity--required--label_selector))
- `namespace_selector` (Block List, Max: 1) A label query over the set of namespaces that the term applies to. The term is applied to the union of the namespaces selected by this field and the ones listed in the namespaces field (see [below for nested schema](#nestedblock--pod_affinity--required--namespace_selector))
- `namespaces` (List of String) Namespaces specifies a static list of namespace names that the term applies to. The term is applied to the union of the namespaces listed in this field and the ones selected by namespaceSelector

<a id="nestedblock--pod_affinity--required--label_selector"></a>
### Nested Schema for `pod_affinity.required.label_selector`

Optional:

- `match_expressions` (Block List) A list of label selector requirements. The requirements are ANDed (see [below for nested schema](#nestedblock--pod_affinity--required--label_selector--match_expressions))
- `match_labels` (Map of String) A map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value"

<a id="nestedblock--pod_affinity--required--label_selector--match_expressions"></a>
### Nested Schema for `pod_affinity.required.label_selector.match_expressions`

Required:

- `key` (String) The label key that the selector applies to
- `operator` (String) Operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist

Optional:

- `values` (List of String) Values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty



<a id="nestedblock--pod_affinity--required--namespace_selector"></a>
### Nested Schema for `pod_affinity.required.namespace_selector`

Optional:

- `match_expressions` (Block List) A list of label selector requirements. The requirements are ANDed (see [below for nested schema](#nestedblock--pod_affinity--required--namespace_selector--match_expressions))
- `match_labels` (Map of String) A map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value"

<a id="nestedblock--pod_affinity--required--namespace_selector--match_expressions"></a>
### Nested Schema for `pod_affinity.required.namespace_selector.match_expressions`

Required:

- `key` (String) The label key that the selector applies to
- `operator` (String) Operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist

Optional:

- `values` (List of String) Values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty





<a id="nestedblock--pod_anti_affinity"></a>
### Nested Schema for `pod_anti_affinity`

Optional:

- `preferred` (Block List) The scheduler will prefer to schedule pods to nodes that satisfy the affinity expressions specified by this field (see [below for nested schema](#nestedblock--pod_anti_affinity--preferred))
- `required` (Block List) If the affinity requirements specified by this field are not met at scheduling time, the pod will not be scheduled onto the node (see [below for nested schema](#nestedblock--pod_anti_affinity--required))

<a id="nestedblock--pod_anti_affinity--preferred"></a>
### Nested Schema for `pod_anti_affinity.preferred`

Required:

- `pod_affinity_term` (Block List, Min: 1, Max: 1) Required. A pod affinity term, associated with the corresponding weight (see [below for nested schema](#nestedblock--pod_anti_affinity--preferred--pod_affinity_term))
- `weight` (Number) Weight associated with matching the corresponding podAffinityTerm, in the range 1-100

<a id="nestedblock--pod_anti_affinity--preferred--pod_affinity_term"></a>
### Nested Schema for `pod_anti_affinity.preferred.pod_affinity_term`

Required:

- `topology_key` (String) TopologyKey is the key of node labels. Nodes that have a label with this key and identical values are considered to be in the same topology

Optional:

- `label_selector` (Block List, Max: 1) A label query over a set of resources, in this case pods (see [below for nested schema](#nestedblock--pod_anti_affinity--preferred--pod_affinity_term--label_selector))
- `namespace_selector` (Block List, Max: 1) A label query over the set of namespaces that the term applies to. The term is applied to the union of the namespaces selected by this field and the ones listed in the namespaces field (see [below for nested schema](#nestedblock--pod_anti_affinity--preferred--pod_affinity_term--namespace_selector))
- `namespaces` (List of String) Namespaces specifies a static list of namespace names that the term applies to. The term is applied to the union of the namespaces listed in this field and the ones selected by namespaceSelector

<a id="nestedblock--pod_anti_affinity--preferred--pod_affinity_term--label_selector"></a>
### Nested Schema for `pod_anti_affinity.preferred.pod_affinity_term.label_selector`

Optional:

- `match_expressions` (Block List) A list of label selector requirements. The requirements are ANDed (see [below for nested schema](#nestedblock--pod_anti_affinity--preferred--pod_affinity_term--label_selector--match_expressions))
- `match_labels` (Map of String) A map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value"

<a id="nestedblock--pod_anti_affinity--preferred--pod_affinity_term--label_selector--match_expressions"></a>
### Nested Schema for `pod_anti_affinity.preferred.pod_affinity_term.label_selector.match_expressions`

Required:

- `key` (String) The label key that the selector applies to
- `operator` (String) Operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist

Optional:

- `values` (List of String) Values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty



<a id="nestedblock--pod_anti_affinity--preferred--pod_affinity_term--namespace_selector"></a>
### Nested Schema for `pod_anti_affinity.preferred.pod_affinity_term.namespace_selector`

Optional:

- `match_expressions` (Block List) A list of label selector requirements. The requirements are ANDed (see [below for nested schema](#nestedblock--pod_anti_affinity--preferred--pod_affinity_term--namespace_selector--match_expressions))
- `match_labels` (Map of String) A map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value"

<a id="nestedblock--pod_anti_affinity--preferred--pod_affinity_term--namespace_selector--match_expressions"></a>
### Nested Schema for `pod_anti_affinity.preferred.pod_affinity_term.namespace_selector.match_expressions`

Required:

- `key` (String) The label key that the selector applies to
- `operator` (String) Operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist

Optional:

- `values` (List of String) Values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty





<a id="nestedblock--pod_anti_affinity--required"></a>
### Nested Schema for `pod_anti_affinity.required`

Required:

- `topology_key` (String) TopologyKey is the key of node labels. Nodes that have a label with this key and identical values are considered to be in the same topology

Optional:

- `label_selector` (Block List, Max: 1) A label query over a set of resources, in this case pods (see [below for nested schema](#nestedblock--pod_anti_affinity--required--label_selector))
- `namespace_selector` (Block List, Max: 1) A label query over the set of namespaces that the term applies to. The term is applied to the union of the namespaces selected by this field and the ones listed in the namespaces field (see [below for nested schema](#nestedblock--pod_anti_affinity--required--namespace_selector))
- `namespaces` (List of String) Namespaces specifies a static list of namespace names that the term applies to. The term is applied to the union of the namespaces listed in this field and the ones selected by namespaceSelector

<a id="nestedblock--pod_anti_affinity--required--label_selector"></a>
### Nested Schema for `pod_anti_affinity.required.label_selector`

Optional:

- `match_expressions` (Block List) A list of label selector requirements. The requirements are ANDed (see [below for nested schema](#nestedblock--pod_anti_affinity--required--label_selector--match_expressions))
- `match_labels` (Map of String) A map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value"

<a id="nestedblock--pod_anti_affinity--required--label_selector--match_expressions"></a>
### Nested Schema for `pod_anti_affinity.required.label_selector.match_expressions`

Required:

- `key` (String) The label key that the selector applies to
- `operator` (String) Operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist

Optional:

- `values` (List of String) Values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty



<a id="nestedblock--pod_anti_affinity--required--namespace_selector"></a>
### Nested Schema for `pod_anti_affinity.required.namespace_selector`

Optional:

- `match_expressions` (Block List) A list of label selector requirements. The requirements are ANDed (see [below for nested schema](#nestedblock--pod_anti_affinity--required--namespace_selector--match_expressions))
- `match_labels` (Map of String) A map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value"

<a id="nestedblock--pod_anti_affinity--required--namespace_selector--match_expressions"></a>
### Nested Schema for `pod_anti_affinity.required.namespace_selector.match_expressions`

Required:

- `key` (String) The label key that the selector applies to
- `operator` (String) Operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist

Optional:

- `values` (List of String) Values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty





<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `default` (String)
- `delete` (String)
- `read` (String)
- `update` (String)


<a id="nestedblock--tpm"></a>
### Nested Schema for `tpm`

Optional:

- `name` (String) just add this field for doc generation

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
terraform import harvester_virtualmachine.foo <Namespace>/<Name>
```
